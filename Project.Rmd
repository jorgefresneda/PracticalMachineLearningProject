##Introduction

 
 In this project, we are going to analyse data about weight lifted exercises coming from http://groupware.les.inf.puc-rio.br/har. In this experiment, the team asked a number of non-experienced weight lifters to exercise either correctly or incorrectly, but with a specific error. The exercise was supervied by an experienced trainer to ensure it was performed either correctly or with the right error.
 
The data is loaded like this:
 
```{r}
 # Libraries needed for the whole study
 library(ggplot2)
 library(caret)
 library(dplyr)
 library(randomForest)
 library(doMC)
 registerDoMC(cores=4)
```
```{r}
 data <- tbl_df(read.csv("pml-training.csv"))
 dim(data)
 ```
We can see the dataset has 160 variables, which is really large.

##Cleaning the data

First, the data contained some division by zero errors: these have been replaced by NA using a standard text editor.

Then, I removed variables with mostly NA. For this, I create a list of columns I want to keep:

```{r}
 keep_columns <- is.na(data) %>%
   apply(2, sum) %>%
   (function(m) { m[m < dim(data)[1]/2] }) %>%
   names
 ```
 
The last cleaning step consists of removing columns we do not want to train on because they do not make sense for the project. The first obvious outliers are `X`, `user_name` and the timestamps. For the timestamps, at most we would want to use a time span from the start of the exercise, but never the raw timestamps. A bit less obvious, the `new_window` and `num_window`variables indicate when the averaging is done and are probably not very useful in themselved.

```{r}
 summary(cars)
 to_remove <- c("X", "user_name", "raw_timestamp_part_1", "raw_timestamp_part_2", "cvtd_timestamp", "new_window",   "num_window")
 keep_columns <- keep_columns[which(!keep_columns %in% to_remove)]
 clean_data <- data[keep_columns]
 dim(clean_data)
 ```
